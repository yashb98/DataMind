global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: datamind-dev
    env: development

rule_files:
  - "alerts/*.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets: []

scrape_configs:
  # ---- FastAPI services ----
  - job_name: datamind-api
    static_configs:
      - targets: ["datamind-api:8000"]
    metrics_path: /metrics

  # ---- LiteLLM Proxy ----
  - job_name: litellm
    static_configs:
      - targets: ["litellm:4000"]
    metrics_path: /metrics

  # ---- Kong ----
  - job_name: kong
    static_configs:
      - targets: ["kong:8001"]
    metrics_path: /metrics

  # ---- MCP Tool Servers ----
  - job_name: mcp-tools
    static_configs:
      - targets:
          - "mcp-python-sandbox:8010"
          - "mcp-sql-executor:8011"
          - "mcp-visualization:8012"
          - "mcp-knowledge-base:8013"
          - "mcp-report-generator:8014"
          - "mcp-data-connector:8015"

  # ---- Databases ----
  - job_name: postgres
    static_configs:
      - targets: ["postgres-exporter:9187"]

  - job_name: redis
    static_configs:
      - targets: ["redis-exporter:9121"]

  - job_name: kafka
    static_configs:
      - targets: ["kafka-exporter:9308"]

  # ---- Node metrics ----
  - job_name: node
    static_configs:
      - targets: ["node-exporter:9100"]

  # ---- Prometheus self-monitoring ----
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]
